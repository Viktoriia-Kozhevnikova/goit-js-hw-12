{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"45141895-b62da3b06f4b18f1184207a2c\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page: perPage \n  };\n\n  try {\n    const response = await axios.get(URL, { params });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet lightbox;\n\nexport function displayImages(data, gallery, append = false) {\n  if (!append) {\n    gallery.innerHTML = \"\";\n  }\n\n  if (data.hits.length === 0) {\n    iziToast.error({\n      title: \"No Results\",\n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n      timeout: 3000,\n      position: \"topRight\"\n    });\n    return;\n  }\n\n  const markup = data.hits.map(image => {\n    return `\n      <li class=\"gallery-item-wrapper\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"img\" />\n          <div class=\"container-properties\">\n            <ul class=\"list-properties\">\n              <li class=\"properties\"><p class=\"text\"><strong>Likes</strong> ${image.likes}</p></li>\n              <li class=\"properties\"><p class=\"text\"><strong>Views</strong> ${image.views}</p></li>\n              <li class=\"properties\"><p class=\"text\"><strong>Comments</strong> ${image.comments}</p></li>\n              <li class=\"properties\"><p class=\"text\"><strong>Downloads</strong> ${image.downloads}</p></li>\n            </ul>\n          </div>\n        </a>\n      </li>`;\n  }).join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\", {});\n  } else {\n    lightbox.refresh();\n  }\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { displayImages } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".search\");\nconst button = document.querySelector(\".btn\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nconst perPage = 15;\n\ninput.addEventListener(\"input\", checkButtonState);\nform.addEventListener(\"submit\", formSubmit);\nloadMoreButton.addEventListener(\"click\", loadMoreImages);\n\nfunction showLoader() {\n  loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loader.style.display = \"none\";\n}\n\nfunction checkButtonState() {\n  button.disabled = input.value.trim() === \"\";\n}\n\nasync function formSubmit(event) {\n  event.preventDefault();\n  query = input.value.trim();\n\n  if (query === \"\") {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Please enter a search query.\",\n      timeout: 3000,\n      position: \"topRight\"\n    });\n    return;\n  }\n\n  page = 1; \n  showLoader();\n  loadMoreButton.style.display = \"none\";\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    displayImages(data, gallery);\n    if (data.hits.length > 0 && data.totalHits > perPage) {\n      loadMoreButton.style.display = \"block\";\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"An error occurred while fetching images. Please try again!\",\n      timeout: 3000,\n      position: \"topRight\"\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function loadMoreImages() {\n  page += 1; \n  showLoader();\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    displayImages(data, gallery, true);\n\n    if ((page - 1) * perPage + data.hits.length >= data.totalHits) {\n      loadMoreButton.style.display = \"none\";\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\"\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"An error occurred while fetching images. Please try again!\",\n      position: \"topRight\"\n    });\n  } finally {\n    hideLoader();\n    smoothScroll();\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\"\n  });\n}\n\nbutton.disabled = true;"],"names":["URL","API_KEY","fetchImages","query","page","perPage","params","axios","error","lightbox","displayImages","data","gallery","append","iziToast","markup","image","SimpleLightbox","form","input","button","loader","loadMoreButton","checkButtonState","formSubmit","loadMoreImages","showLoader","hideLoader","event","smoothScroll","cardHeight"],"mappings":"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"}